function writers_select(){updateForm($("#writers_select").val(),"writers",["mongoid","writer_name","email","writer_type","writer_rate","pending_rate","pending_date"]);if($("#writers_select").val()!=""){$("#opt_in").prop("disabled",false);$("#pending_rate").prop("disabled",false);$("#pending_date").prop("disabled",false);reloadFormElement("opt-in-list","writers",$("#writers_select").val());reloadFormElement("writer-performance","writers",$("#writers_select").val())}else{$("#opt_in").prop("disabled",true);$("#pending_rate").prop("disabled",true);$("#pending_date").prop("disabled",true);reloadFormElement("opt-in-list","writers");reloadFormElement("writer-performance","writers")}}function reloadPageElements(e,t){$("#"+e+"_form")[0].reset();$("#"+e+"_form #_id").val("");$("#"+e+"_select").prop("selectedIndex",0);$("#opt_in").prop("disabled",true);$("#pending_rate").prop("disabled",true);$("#pending_date").prop("disabled",true);reloadFormElement("opt-in-list","writers");if(t){reloadFormElement("writers_select_container","writers");$("#writers_select").change(function(){writers_select()})}}function saveDoc(e,t){if($("#pending_rate").val()!=""&&$("#pending_date").val()==""||$("#pending_rate").val()==""&&$("#pending_date").val()!=""){if($("#pending_rate").val()!=""&&$("#pending_date").val()==""){popUpMsg("If you fill in a pending raise for a writer, you must provide a date the raise goes into effect.");$("#pending_date").focus();return false}else{popUpMsg("You shouldn't fill in a date for a raise to go into effect, unless you filling the new raise amount as well.");$("#pending_rate").focus();return false}}if(validateForm(e+"_form")!=false){var n=createDocFromForm(e+"_form");n._id=$("#"+e+"_form #_id").val();n.url=site_url+e;n.collection=e;n.mongoid=t;var r=saveEntry(n);if(r.err===null){popUpMsg("Save was successful!");reloadPageElements(e,true);return true}else{popUpMsg(r.err);return false}}return false}function removeOptIn(e){var t={};t.url="writers",t.collection="writers",t.set="opt_in",t.values=e;t._id=$("#writers_select").val();t.mongoid=1;removeSetFromDoc(t);reloadFormElement("opt-in-list","writers",$("#writers_select").val())}$(document).ready(function(){$("#writer_rate_container").css("padding-left","42px");$("#email_container").addClass("col-lg-offset-2");$("#writer_rate_container").addClass("col-lg-offset-2");$("#pending_date_container").addClass("col-lg-offset-2");$("#addOptIn_container").css("padding-top","5px");$("#writers_select").change(function(){writers_select()});$("#submitBtn").click(function(){$("#opt_in").prop("disabled",true);saveDoc("writers",true)});$("#resetBtn").click(function(){reloadPageElements("writers",false)});$("#addOptIn").click(function(){if($("#opt_in").val()!=""){var e={};e.url="writers",e.collection="writers",e.set="opt_in",e.values=$("#opt_in").val();e._id=$("#writers_select").val();e.mongoid=1;addSetToDoc(e);$("#opt_in").val("");reloadFormElement("opt-in-list","writers",$("#writers_select").val())}});$("#opt_in").prop("disabled",true);$("#pending_rate").prop("disabled",true);$("#pending_date").prop("disabled",true);$("#pending_date").datepicker({firstDay:1,beforeShowDay:function(e){var t=new Date;t.setHours(0,0,0,0);return[e>=t,""]}})})