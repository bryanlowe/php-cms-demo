function invoices_select(){statusApp.showPleaseWait();updateForm($("#invoices_select").val(),"invoices",["mongoid","client_id","invoice_number","wp_invoice_id","invoice_cost","invoice_description"]);if($("#invoices_select").val()!=""){disableElement("projects_select",false);disableElement("addBtn",false);$("#file_upload").uploadify("disable",false);reloadFormElement("toggleInvoice","invoices",$("#invoices_select").val());reloadFormElement("current_projects","invoices",$("#invoices_select").val())}else{disableElement("projects_select",true);disableElement("addBtn",true);$("#file_upload").uploadify("disable",true);reloadFormElement("toggleInvoice","invoices");reloadFormElement("current_projects","invoices")}statusApp.hidePleaseWait()}function reloadPageElements(e,t){statusApp.showPleaseWait();$("#"+e+"_form")[0].reset();$("#"+e+"_form #_id").val("");$("#client_id").val("");$("#"+e+"_select").prop("selectedIndex",0);$("#clients_select").prop("selectedIndex",0);$("#projects_select").prop("selectedIndex",0);disableElement("clients_select",false);reloadFormElement("projects_select_container","invoices");reloadFormElement("toggleInvoice","invoices");reloadFormElement("current_projects","invoices");disableElement("projects_select",true);disableElement("addBtn",true);$("#file_upload").uploadify("disable",true);if(t){reloadFormElement("invoices_select_container","invoices");$("#invoices_select").change(function(){invoices_select()})}statusApp.hidePleaseWait()}function updateForm(e,t,n){if(e!=""){var r=false;if($.inArray("mongoid",n)>-1){r=true}var i=$.ajax({type:"POST",dataType:"json",url:site_url+t,async:false,data:{_id:e,collection:t,mongoid:r,_ajaxFunc:"getEntry"}});var s=$.parseJSON(i.responseText);$("#"+t+"_form")[0].reset();for(var o=0;o<n.length;o++){if(n[o]=="mongoid"){$("#"+t+"_form #_id").val(s._id["$id"])}else if(n[o]=="client_id"){$("#"+t+"_form #client_id").val(s.client_id["$id"]);$("#clients_select").val(s.client_id["$id"]);$("#clients_select").change();disableElement("clients_select",true)}else{$("#"+t+"_form #"+n[o]).val(s[n[o]])}}}else{$("#"+t+"_form")[0].reset();$("#"+t+"_form #_id").val("");$("#"+t+"_form #client_id").val("")}}function addProject(){var e={};e.url="invoices",e.collection="invoices",e.set="project_list",e.values={},e._id=$("#invoices_select").val();e.values=$("#projects_select").val();e.mongoid=1;addSetToDoc(e);reloadFormElement("current_projects","invoices",$("#invoices_select").val());reloadFormElement("projects_select_container","invoices",$("#clients_select").val())}function removeProject(e){var t={};t.url="invoices",t.collection="invoices",t.set="project_list",t.values=e;t._id=$("#invoices_select").val();t.mongoid=1;removeSetFromDoc(t);reloadFormElement("current_projects","invoices",$("#invoices_select").val());reloadFormElement("projects_select_container","invoices",$("#clients_select").val())}$(document).ready(function(){$("#invoices_select").change(function(){invoices_select()});$("#clients_select").change(function(){$("#client_id").val($(this).val());if($(this).val()!=""){reloadFormElement("projects_select_container","invoices",$("#clients_select").val());if($("#invoices_select").val()==""){disableElement("projects_select",true);disableElement("addBtn",true)}}else{reloadFormElement("projects_select_container","invoices");if($("#invoices_select").val()==""){disableElement("projects_select",true);disableElement("addBtn",true)}}});$("#submitBtn").click(function(){disableElement("description",true);saveDoc("invoices",true)});$("#deleteBtn").click(function(){deleteDoc("invoices",true)});$("#resetBtn").click(function(){reloadPageElements("invoices",false)});$("#addBtn").click(function(){if($("#projects_select").val()!=""){addProject()}});$("#invoice_status").change(function(){if($(this).val()!=""){if($(this).val()=="PAID"){$("#paidBtn").prop("disabled",false);$("#paidBtn").addClass("btn-glow-success");$("#unpaidBtn").prop("disabled",true);$("#unpaidBtn").removeClass("btn-glow-danger")}else{$("#paidBtn").prop("disabled",true);$("#paidBtn").removeClass("btn-glow-success");$("#unpaidBtn").prop("disabled",false);$("#unpaidBtn").addClass("btn-glow-danger")}}else{$("#paidBtn").prop("disabled",true);$("#paidBtn").removeClass(".btn-glow-success");$("#unpaidBtn").prop("disabled",true);$("#unpaidBtn").removeClass(".btn-glow-danger")}});disableElement("projects_select",true);disableElement("addBtn",true)})