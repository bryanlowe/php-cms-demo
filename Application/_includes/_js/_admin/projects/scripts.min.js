function reloadPageElements(){refreshBLLSelectOptions("#projects_form select#project_id","projects",site_url+"admin/projects","project_title","project_id","project_title ASC");$("#projects_form")[0].reset();$("#project_status_form")[0].reset();$("#project_status_form #project_status_date").val("");$("#project_status_form #project_status_id").val("")}function saveProject(){var e=saveEntry("Projects");if(e.length>0){if(e[0]=="error"){popUpMsg("Form is not complete!");displayErrors(e[1],"projects");return false}else if(e[0]=="pass"){popUpMsg("Project was saved successfully!");reloadPageElements();return true}}}function saveStatus(){var e=saveEntry("project_status");if(e.length>0){if(e[0]=="error"){popUpMsg("Form is not complete!");displayErrors(e[1],"project_status");return false}else if(e[0]=="pass"){popUpMsg("Project status was saved successfully!");return true}}}function deleteProject(){var e="";$.prompt("<p>Are you sure you want to delete this project?</p><p>If you delete this project, the project status will be deleted as well.</p>",{title:"Are you sure?",buttons:{Yes:true,No:false},submit:function(t,n,r,i){if(n){e=deleteEntry("Projects");if(e=="Deletion Success"){reloadPageElements()}}$.prompt.close()}})}function updateProjectStatusForm(e){e=e!=""?e:0;var t=$.ajax({type:"POST",dataType:"json",url:"/admin/projects",async:false,data:{projectID:e,_ajaxFunc:"getProjectStatus"}});var n=$.parseJSON(t.responseText);n=n[0];if(typeof n!="undefined"){$("#project_status_form #project_status_id").val(n["project_status_id"]);$("#project_status_form #project_id").val(n["project_id"]);$("#project_status_form #status").val(n["status"]);$("#project_status_form #description").val(n["description"]);$("#project_status_form #project_status_date").val(n["project_status_date"]);$('#project_status_form input[name="saveBtn"]').removeAttr("disabled");$('#project_status_form input[name="saveBtn"]').removeClass("disabled")}else{$("#project_status_form")[0].reset();$("#project_status_form #project_status_date").val("");$("#project_status_form #project_status_id").val("");if(e==0){$('#project_status_form input[name="saveBtn"]').attr("disabled","disabled");$('#project_status_form input[name="saveBtn"]').addClass("disabled")}else{$("#project_status_form #project_id").val(e);$('#project_status_form input[name="saveBtn"]').removeAttr("disabled");$('#project_status_form input[name="saveBtn"]').removeClass("disabled")}}}$(document).ready(function(){refreshBLLSelectOptions("#projects_form select#project_id","projects",site_url+"admin/projects","project_title","project_id","project_title ASC");refreshBLLSelectOptions("#projects_form select#client_id","clients",site_url+"admin/projects","company","client_id","company ASC");$("#projects_form select#project_id").change(function(){updateBLLFormFields("projects_form","projects",site_url+"admin/projects");updateProjectStatusForm($(this).val())});$('#project_status_form input[name="saveBtn"]').attr("disabled","disabled");$('#project_status_form input[name="saveBtn"]').addClass("disabled")})