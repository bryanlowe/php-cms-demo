function projects_select(){statusApp.showPleaseWait();updateForm($("#projects_select").val(),"projects",["mongoid","client_id","project_title","project_status","project_description"]);if($("#projects_select").val()!=""){disableElement("clients_select",true);disableElement("project_tags",false);disableElement("addTagBtn",false);reloadFormElement("project_tags_container","projects",$("#client_id").val());reloadFormElement("current_tags","projects",$("#projects_select").val())}else{disableElement("clients_select",false);disableElement("project_tags",true);disableElement("addTagBtn",true);reloadFormElement("project_tags_container","projects");reloadFormElement("current_tags","projects")}statusApp.hidePleaseWait()}function reloadPageElements(e,t){$("#"+e+"_form")[0].reset();$("#"+e+"_form #_id").val("");$("#client_id").val("");$("#"+e+"_select").prop("selectedIndex",0);$("#clients_select").prop("selectedIndex",0);disableElement("clients_select",false);reloadFormElement("project_tags_container","projects");reloadFormElement("current_tags","projects");disableElement("project_tags",true);disableElement("addTagBtn",true);if(t){reloadFormElement("projects_select_container","projects");$("#projects_select").change(function(){projects_select()})}}function updateForm(e,t,n){if(e!=""){var r=false;if($.inArray("mongoid",n)>-1){r=true}var i=$.ajax({type:"POST",dataType:"json",url:site_url+t,async:false,data:{_id:e,collection:t,mongoid:r,_ajaxFunc:"getEntry"}});var s=$.parseJSON(i.responseText);$("#"+t+"_form")[0].reset();for(var o=0;o<n.length;o++){if(n[o]=="mongoid"){$("#"+t+"_form #_id").val(s._id["$id"])}else if(n[o]=="client_id"){$("#"+t+"_form #client_id").val(s.client_id["$id"]);$("#clients_select").val(s.client_id["$id"]);$("#clients_select").change();disableElement("clients_select",true)}else{$("#"+t+"_form #"+n[o]).val(s[n[o]])}}}else{$("#"+t+"_form")[0].reset();$("#"+t+"_form #_id").val("");$("#"+t+"_form #client_id").val("");$("#clients_select").val("");$("#clients_select").change()}}function addProjectTag(){var e={};e.url="projects",e.collection="projects",e.set="project_tags",e.values={},e._id=$("#projects_select").val();e.values=$("#project_tags").val();e.mongoid=1;addSetToDoc(e);reloadFormElement("current_tags","projects",$("#projects_select").val())}function removeProjectTag(e){var t={};t.url="projects",t.collection="projects",t.set="project_tags",t.values=e;t._id=$("#projects_select").val();t.mongoid=1;removeSetFromDoc(t);reloadFormElement("current_tags","projects",$("#projects_select").val())}$(document).ready(function(){$("#projects_select").change(function(){projects_select()});$("#clients_select").change(function(){$("#client_id").val($(this).val());if($(this).val()!=""){reloadFormElement("project_tags_container","projects",$("#client_id").val());if($("#projects_select").val()==""){disableElement("project_tags",true);disableElement("addTagBtn",true)}}else{reloadFormElement("project_tags_container","projects");if($("#projects_select").val()==""){disableElement("project_tags",true);disableElement("addTagBtn",true)}}});$("#submitBtn").click(function(){saveDoc("projects",true)});$("#deleteBtn").click(function(){deleteDoc("projects",true)});$("#resetBtn").click(function(){reloadPageElements("projects",false)});$("#addTagBtn").click(function(){if($("#project_tags").val()!=""){addProjectTag()}});disableElement("project_tags",true);disableElement("addTagBtn",true)})