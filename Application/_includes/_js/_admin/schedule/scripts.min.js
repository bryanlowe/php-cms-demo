function writers_select(){if($("#writers_select").val()!=""){$("#datepicker").prop("disabled",false);$("#hours").prop("disabled",false);$("#description").prop("disabled",false);refreshCalendarForWriter($("#writers_select").val())}else{$("#datepicker").val("");$("#datepicker").prop("disabled",true);$("#hours").prop("selectedIndex",0);$("#hours").prop("disabled",true);$("#description").val("");$("#description").prop("disabled",true);$("#writer-schedule").fullCalendar("refetchEvents")}}function saveTheDate(){if($("#writers_select").val()!=""){if($("#datepicker").val()==""){popUpMsg("You need to pick a date!");return false}else if($("#hours").val()==""){popUpMsg("You need to select your amount of hours!");return false}var e={};e.url="schedule",e.collection="writers",e.set="schedule",e.values={};e.values.title=$("#writers_select option:selected").text()+"\nHours: "+$("#hours").val();e.values.start=$("#datepicker").val();e.values.description=$("#description").val();e._id=$("#writers_select").val();e.mongoid=1;addSetToDoc(e);refreshCalendarForWriter($("#writers_select").val())}}function refreshCalendarForWriter(e){var t=site_url+"schedule?_ajaxFunc=gatherScheduledEvents&_id="+e;$("#writer-schedule").fullCalendar("removeEvents");$("#writer-schedule").fullCalendar("addEventSource",t);$("#writer-schedule").fullCalendar("rerenderEvents");$("#writer-schedule").fullCalendar("removeEventSource",t)}$(document).ready(function(){$("#writer-schedule").fullCalendar({header:{left:"",center:"title",right:""},events:{url:site_url+"schedule",data:{_ajaxFunc:"gatherScheduledEvents"}},eventRender:function(e,t){if(e.description!=""){t.append("Description: "+e.description)}},firstDay:1,defaultView:"basicWeek",editable:false});$("#datepicker").datepicker({firstDay:1,beforeShowDay:function(e){var t=new Date;t.setHours(0,0,0,0);t.setDate(t.getDate()+1-(t.getDay()||7));var n=new Date(t);n.setDate(t.getDate()+6);return[e>=t&&e<=n,""]}});$("#writers_select").change(function(){writers_select()});$("#submitBtn").click(function(){saveTheDate()});$("#resetBtn").click(function(){$("#writers_select").prop("selectedIndex",0);$("#writers_select").change();$("#writer-schedule").fullCalendar("refetchEvents")});$("#datepicker").prop("disabled",true);$("#hours").prop("disabled",true);$("#description").prop("disabled",true)})