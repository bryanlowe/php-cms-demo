function saveEntry(e){statusApp.showPleaseWait();var t=$.ajax({type:"POST",url:e.url,async:false,data:{doc:e,_ajaxFunc:"saveEntry"}});statusApp.hidePleaseWait();return $.parseJSON(t.responseText)}function addSetToDoc(e){statusApp.showPleaseWait();var t=$.ajax({type:"POST",url:e.url,async:false,data:{doc:e,_ajaxFunc:"addSetToEntry"}});statusApp.hidePleaseWait();return $.parseJSON(t.responseText)}function removeSetFromDoc(e){statusApp.showPleaseWait();var t=$.ajax({type:"POST",url:e.url,async:false,data:{doc:e,_ajaxFunc:"removeSetFromEntry"}});statusApp.hidePleaseWait();return $.parseJSON(t.responseText)}function validateForm(e){var t=0;$("form#"+e+' input[required="1"]').each(function(){if($.trim($(this).val()).length==0){$("form#"+e+" #"+$(this).attr("name")+"_container").addClass("has-error");t++}else{$("form#"+e+" #"+$(this).attr("name")+"_container").removeClass("has-error")}});var n=[];$("form#"+e+' input[required="1"][type="radio"]').each(function(){n.push($(this).attr("name"))});if(n.length>0){for(var r=0;r<n.length;r++){if($('input[name="'+n[r]+'"]').filter(":checked").length==0){$("form#"+e+" #"+n[r]+"_container").addClass("has-error");t++}else{$("form#"+e+" #"+n[r]+"_container").removeClass("has-error")}}}var i=[];$("form#"+e+' input[required="1"][type="radio"]').each(function(){i.push($(this).attr("name"))});if(i.length>0){for(var r=0;r<i.length;r++){if($('input[name="'+i[r]+'"]').filter(":checked").length==0){$("form#"+e+" #"+i[r]+"_container").addClass("has-error");t++}else{$("form#"+e+" #"+i[r]+"_container").removeClass("has-error")}}}$("form#"+e+' textarea[required="1"]').each(function(){if($.trim($(this).val()).length==0){$("form#"+e+" #"+$(this).attr("name")+"_container").addClass("has-error");t++}else{$("form#"+e+" #"+$(this).attr("name")+"_container").removeClass("has-error")}});$("form#"+e+' select[required="1"]').each(function(){if($.trim($(this).val()).length==0){$("form#"+e+" #"+$(this).attr("name")+"_container").addClass("has-error");t++}else{$("form#"+e+" #"+$(this).attr("name")+"_container").removeClass("has-error")}});return t==0?true:false}function createDocFromForm(e){var t={},n={};$.each($("form#"+e).serializeArray(),function(t,r){var i=$("form#"+e+' input[name="'+r.name+'"]').prop("type");if(i=="radio"||i=="checkbox"){if(i=="checkbox"&&typeof n[r.name]!=="object"||typeof n[r.name]==="undefined"){n[r.name]=[]}if(i=="radio"){n[r.name]=r.value}else if(i=="checkbox"){n[r.name].push(r.value)}}else if(r.name!="_id"){n[r.name]=r.value}$("form#"+e+" #"+r.name+"_container").removeClass("has-error")});t["values"]=n;return t}function deleteEntry(e){statusApp.showPleaseWait();var t=$.ajax({type:"POST",url:e.url,async:false,data:{doc:e,_ajaxFunc:"deleteEntry"}});statusApp.hidePleaseWait();return $.parseJSON(t.responseText)}function reloadPageElements(e){$("#"+e+"_form")[0].reset();$("#"+e+"_form #_id").val("");$("#"+e+"_select").prop("selectedIndex",0)}function saveDoc(e,t){if(validateForm(e+"_form")!=false){var n=createDocFromForm(e+"_form");n._id=$("#"+e+"_form #_id").val();n.url=site_url+e;n.collection=e;n.mongoid=t;var r=saveEntry(n);if(r.err===null){popUpMsg("Save was successful!");reloadPageElements(e,true);return true}else{popUpMsg(r.err);return false}}return false}function deleteDoc(e,t){var n=false;if($("#"+e+"_form #_id").val()!=""){var r="";$.prompt("<p>Are you sure you want to delete this entry?</p>",{title:"Are you sure?",buttons:{Yes:true,No:false},submit:function(r,i,s,o){if(i){var u=createDocFromForm(e+"_form");u._id=$("#"+e+"_form #_id").val();u.url=site_url+e;u.collection=e;u.mongoid=t;var a=deleteEntry(u);if(a.err===null){reloadPageElements(e,true);n=true}}$.prompt.close()}})}else{popUpMsg("You cannot delete an entry that has not been saved!")}return n}function updateForm(e,t,n){if(e!=""){var r=0;if($.inArray("mongoid",n)>-1){r=1}var i=$.ajax({type:"POST",dataType:"json",url:site_url+t,async:false,data:{_id:e,collection:t,mongoid:r,_ajaxFunc:"getEntry"}});var s=$.parseJSON(i.responseText);$("#"+t+"_form")[0].reset();for(var o=0;o<n.length;o++){if(n[o]=="mongoid"){$("#"+t+"_form #_id").val(s._id["$id"])}else{$("#"+t+"_form #"+n[o]).val(s[n[o]])}}}else{$("#"+t+"_form")[0].reset();$("#"+t+"_form #_id").val("")}}function reloadFormElement(e,t,n){if(e!=""){if(typeof n=="undefined"){n=0}var r=$.ajax({type:"POST",dataType:"json",url:site_url+t,async:false,data:{dom_id:e,_id:n,_ajaxFunc:"renderPageElement"}});$("#"+e).html(r.responseText)}}