function saveEntry(e){statusApp.showPleaseWait();var t=$.ajax({type:"POST",url:e.url,async:false,data:{collection:e.collection,values:e.values,mongoid:e.mongoid,_ajaxFunc:"saveDocEntry"}});statusApp.hidePleaseWait();return t.responseText}function validateForm(e){var t=0;$("form#"+e+' input[required="1"]').each(function(){if($.trim($(this).val()).length==0){$("form#"+e+" #"+$(this).attr("name")+"_container").addClass("has-error");t++}else{$("form#"+e+" #"+$(this).attr("name")+"_container").removeClass("has-error")}});$("form#"+e+' textarea[required="1"]').each(function(){if($.trim($(this).val()).length==0){$("form#"+e+" #"+$(this).attr("name")+"_container").addClass("has-error");t++}else{$("form#"+e+" #"+$(this).attr("name")+"_container").removeClass("has-error")}});$("form#"+e+' select[required="1"]').each(function(){if($.trim($(this).val()).length==0){$("form#"+e+" #"+$(this).attr("name")+"_container").addClass("has-error");t++}else{$("form#"+e+" #"+$(this).attr("name")+"_container").removeClass("has-error")}});return t==0?true:false}function createDocFromForm(e){var t={},n={};$.each($("form#"+e).serializeArray(),function(t,r){if(r.type=="radio"||r.type=="checkbox"){if(r.checked){n[r.name]=r.value}}else{n[r.name]=r.value}$("form#"+e+" #"+r.name+"_container").removeClass("has-error")});t["values"]=n;return t}function deleteEntry(e){statusApp.showPleaseWait();var t=$.ajax({type:"POST",url:e.url,async:false,data:{collection:e.collection,values:e.values,mongoid:e.mongoid,_ajaxFunc:"deleteDocEntry"}});statusApp.hidePleaseWait();return t.responseText}function reloadPageElements(e){$("#"+e+"_form")[0].reset();$("#"+e+"_form #_id").val("");$("#"+e+"_select").prop("selectedIndex",0)}function saveDoc(e,t){if(validateForm(e+"_form")!=false){var n=createDocFromForm(e+"_form");n.url=site_url+e;n.collection=e;n.mongoid=t;var r=saveEntry(n);if(r.length==0){popUpMsg("Save was successful!");reloadPageElements(e);return true}}return false}function deleteDoc(e,t){var n=false;if($("#"+e+"_form #_id").val()!=""){var r="";$.prompt("<p>Are you sure you want to delete this entry?</p>",{title:"Are you sure?",buttons:{Yes:true,No:false},submit:function(r,i,s,o){if(i){var u=createDocFromForm(e+"_form");u.url=site_url+e;u.collection=e;u.mongoid=t;var a=deleteEntry(u);if(a.length==0){reloadPageElements(e);n=true}}$.prompt.close()}})}else{popUpMsg("You cannot delete an entry that has not been saved!")}return n}function updateForm(e,t,n){if(e!=""){var r=false;if($.inArray("mongoid",n)){r=true}var i=$.ajax({type:"POST",dataType:"json",url:site_url+t,async:false,data:{_id:e,collection:t,mongoid:r,_ajaxFunc:"getDocByID"}});var s=$.parseJSON(i.responseText);$("#"+t+"_form")[0].reset();for(var o=0;o<n.length;o++){if(n[o]=="mongoid"){$("#"+t+"_form #_id").val(s._id["$id"])}else{$("#"+t+"_form #"+n[o]).val(s[n[o]])}}}else{$("#"+t+"_form")[0].reset();$("#"+t+"_form #_id").val("")}}function reloadFormElement(e,t){if(e!=""){var n=$.ajax({type:"POST",dataType:"json",url:site_url+t,async:false,data:{dom_id:e,_ajaxFunc:"renderPageElement"}});$("#"+e).html(n.responseText)}}